# -*- coding: utf-8 -*-
"""Mercado Inmobiliario en CABA.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1cWlwUiTVMpbFOWdPohLVKxppk8fZwWjo

# **ENCABEZADO**

**Analisis del Mercado Inmobiliario en CABA**
![descarga.jfif](data:image/jpeg;base64,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)



Se pretendió realizar un EDA del Mercado Inmobiliario de CABA a partir de los datos públicos generados, guardados y publicados por el Gobierno de la Ciudad de Buenos Aires. 

Se procedió a trabajar con los DataSets "Precio promedio Alquiler" y "Precio de Venta de Departamentos" elaborados por la Dirección General Calidad Institucional y Gobierno Abierto. 

Se realizó en primera instancia un análisis exploratorio para tener una mayor comprensión de los datos: identificación de tipos de datos, valores nulos y outliers, etc. 
Se avanzó también con la identificación de los valores nulos y de decidió eliminarlos. Esto produjo una reducción significativa de la base de datos.

Aclaraciones respecto de los datos sobre los que se trabajó:

**Precio promedio alquiler**
- Precio promedio mensual (**expresado en pesos**) de departamentos en alquiler de 2 y 3 ambientes usados y a estrenar en la Ciudad.
- Años abarcados : 2013 a 2019.
- Fuente DGEyC-GCBA en base sobre la base de datos de Argenprop.


**Precio de venta de departamentos**
- Precio promedio del m2 (**expresado en dólares**) de departamentos en venta de 2 y 3 ambientes usados y a estrenar.
- Años abarcados : 2010 a 2019. 
- Fuente DGEyC-GCBA en base sobre la base de datos de Argenprop.

# **Paquetes Instalados**
"""

# Instalación
!pip install jupyter-dash
!pip install dash
!pip install dash_core_components
!pip install dash_html_components
!pip install dash_table
!pip install dash_bootstrap_components

pip install --upgrade plotly

#Instalación EDA
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import plotly.graph_objects as go
import seaborn as sns

# Instalación DASH
from jupyter_dash import JupyterDash
import dash_core_components as dcc
import dash_html_components as html
from dash.dependencies import Input,Output,State
import dash_table
import dash_bootstrap_components as dbc
import plotly.express as px

pip freeze > requirements.txt

import types
def imports():
	for name, val in globals().items():
		if isinstance(val, types.ModuleType):
			if val.__name__ !='builtins':
				if val.__name__!='types':
					yield val.__name__
list(imports())

"""# ALQUILERES EN **CABA**"""

precio_alq = pd.read_csv('/content/drive/MyDrive/DATOS/GCBA/Vivienda/precio-alquiler-deptos.csv')
precio_vta = pd.read_csv('/content/drive/MyDrive/DATOS/GCBA/Vivienda/precio-venta-deptos.csv')

precio_alq.head(2)

precio_alq.info()

precio_vta.head(2)

precio_alq.barrio.unique()

len(precio_alq.barrio.unique()) #== len(precio_vta.barrio.unique())  TENGO LA MISMA CANTIDAD DE BARRIOS

## TENGO MAS AÑOS EN UN DF QUE EN OTRO // DEBERIA CONSIDERAR FILTRAR EL DF DE VENTAS PARA QUEDARME CON LOS DATOS DE LOS AÑOS DEL DF DE ALQUILERES

precio_alq.anio.unique()

precio_vta.año.unique()

a = precio_alq.groupby(['barrio','anio', 'ambientes'], as_index=False)['precio_prom'].mean().sort_values('precio_prom', ascending=False)
a= a.reset_index(drop=True)
a.head()

a.info()  ## TENGO UN MONTON DE VALORES NULOS

pd.options.display.float_format = '{:.2f}'.format

a.precio_prom.isna().sum()   ## VALORES NULOS

b = a.loc[(a.precio_prom >=0),:].sort_values(by='precio_prom',ascending=True)   ## ACA TENGO FILTRADO POR AÑO Y SIN VALORES NULOS 
b = b.reset_index(drop=True)
b = b.rename(columns={'anio':'año'})  ## ASI CAMBIO EL NOMBRE DE LA COLUMNA
b.head()

b['ambientes'] = b['ambientes'].replace(
    {'2 ambientes': "2", 
     '3 ambientes': "3"})

b['ambientes'].astype(str).astype(int)

fig1 = px.bar(data_frame = b,
            x = b['barrio'],
            y = b['precio_prom'],
            color = b['año'],
            facet_col = b['ambientes'],
            title = 'Precio promedio de alquileres en CABA por Barrio y Ambientes - Años 2013 a 2019',
            labels = {'precio_prom' : 'Precio Promedio' , 'barrio' : 'Barrio'}
        )
fig1.update_layout(
    showlegend = False,
    title = {"x":0.5,#centrar
             "y":0.9,#bajar
             "font":{"size":20, "color": "grey"}
             }  
)
plt.show()
fig1

e = b.loc[(b['año'].isin([2018,2019])) ,:]
e.head(2)

fig2=px.bar(data_frame = e, x= 'barrio', y='precio_prom', color='ambientes', text='año',
           title = 'Precio promedio de alquileres  - Años 2018 y 2019',
           labels = {'barrio' : 'Barrio' , 'precio_prom' : 'Precio Promedio'}
           )
fig2.update_layout(showlegend = False,
           title = {"x":0.5,#centrar
                    "y":0.9,#bajar
                    "font":{"size":20, "color": "grey"}
                   }  
)
fig2.update_traces(texttemplate='%{text:0.2s}',textposition='outside'),
fig2

c = precio_alq.groupby(['comuna','anio'], as_index=False)['precio_prom'].mean().sort_values('precio_prom', ascending=False)
c= c.loc[(c.precio_prom >=0),:].sort_values(by='precio_prom',ascending=True)   ## ACA TENGO FILTRADO POR AÑO Y SIN VALORES NULOS 
c = c.reset_index(drop=True)
c = c.rename(columns={'anio':'año'})  ## ASI CAMBIO EL NOMBRE DE LA COLUMNA
c

d = c.loc[(c['año'] .isin ([2018,2019])),:].sort_values(by='comuna',ascending=False)
d.reset_index(drop=True)
d.head()

d.loc[d.comuna == 8]

fig3 = px.bar(data_frame= d,
                  x = d['comuna'],
                  y = d['precio_prom'],
                  color = d['año'], 
                  title = 'Precio promedio de alquileres por Comuna - Años 2018 y 2019',
                  labels = {'precio_prom' : 'Precio Promedio' , 'comuna' : 'Comuna'}
                  )
fig3.update_layout(
    showlegend = False,
    title = {"x":0.5,#centrar
             "y":0.9,#bajar
             "font":{"size":20, "color": "grey"}
             }  
)
fig3

"""# VENTAS EN **CABA**"""

precio_vta.head(2)

precio_vta.info()  ## TAMBIEN TENGO MUCHOS VALORES NULOS

precio_vta.isna().sum()    ## TAMBIEN TENGO MUCHOS VALORES NULOS  // SE DECIDE ELIMINARLOS SABIENDO QUE SE DEBILITA MUCHO EL DF

for barrio in precio_alq.barrio.unique():             ## PATERL
  if barrio not in precio_vta.barrio.unique():
    print(barrio)

for barrio in precio_vta.barrio.unique():
  if barrio not in precio_alq.barrio.unique():    
    print(barrio)                                     ## TENGO QUE ARREGLAR ESTE NOMBRE DE BARRIO

precio_vta["barrio"] = precio_vta["barrio"].replace({'PATERL': "PATERNAL"})   ## ARREGLADO

pd.options.display.float_format = '{:.2f}'.format

f = precio_vta.loc[precio_vta.precio_prom>=0]  ## FILTRO PARA ELIMINAR VALORES NULOS
f = f.reset_index(drop=True)
f.head()

f.año.unique()

f.ambientes.unique()

f['ambientes'] = f['ambientes'].replace(
    {'2 ambientes': "2", 
     '3 ambientes': "3"})

f.estado.unique()      ## HAY QUE ARREGLAR TAMBIEN "A estrer"

f["estado"] = f["estado"].replace({'A estrer': "Nuevo"})

f.estado.unique()       ## ARREGLADO

f.info()

f.tail()

f.precio_prom.sort_values(ascending=False)

f.head()

l = f.groupby(['año', 'barrio', 'ambientes'], as_index=False)['precio_prom'].mean().sort_values(by='precio_prom', ascending=False)
l = l.reset_index(drop=True)
l.head(2)

h = f.groupby(['año', 'barrio'], as_index=False)['precio_prom'].mean().sort_values(by='precio_prom', ascending=False)
h = h.reset_index(drop=True)
h.head()

fig4=px.treemap(data_frame= h.loc[h.año == 2019],
          path=[px.Constant('barrio'), 'barrio'],
           values='precio_prom',
           color='precio_prom',
           title = 'Precio promedio de venta por m2 - Año 2019')   
fig4.update_layout(
    showlegend = False,
    title = {"x":0.5,#centrar
             "y":0.9,#bajar
             "font":{"size":20, "color": "grey"}
             }  
)
fig4

p = {2018:'darkgreen',
     2019:'orange'}

i = h.loc[h.año.isin([2018,2019]),:].sort_values('precio_prom', ascending=False).head(20)
i

fig6=px.line(data_frame=i,
        x='barrio',
        y='precio_prom',
        color= 'año',
        labels = {'barrio':'Barrio', 'precio_prom':'Precio promedio de Venta'},
        title = 'Top 20 de precios promedio de venta de departamentos de la CABA - Años 2018 y 2019')
fig6

j = f.groupby(['año', 'barrio','ambientes'], as_index=False)['precio_prom'].mean().sort_values(by='precio_prom', ascending=False)
j = j.reset_index(drop=True)
j = j.loc[j.año.isin([2018,2019])].sort_values('precio_prom', ascending=False).head(30)
j.barrio.unique()

k = f.groupby(['año', 'barrio','ambientes', 'estado'], as_index=False)['precio_prom'].mean().sort_values(by='precio_prom', ascending=False)
k = k.reset_index(drop=True)
k = k.loc[k.año.isin([2018,2019])].sort_values('precio_prom', ascending=False).head(30)
k.head()

fig7 = px.bar(data_frame = k,
            x = k['barrio'],
            y = k['precio_prom'],
            color = k['año'],
            facet_col = k['estado'],
            hover_name = k['año'],
            title = 'Precio promedio de venta de departamentos en CABA - Nuevo o Usado',
            labels = {'precio_prom' : 'Precio Promedio' , 'barrio' : 'Barrio'}
        )
fig7.update_layout(
    showlegend = False,
    title = {"x":0.5,#centrar
             "y":0.9,#bajar
             "font":{"size":25, "color": "grey"}
             }  
)
plt.show()
fig7

z = f.loc[f.año == 2019]
z.head()

z = z.groupby(['barrio','estado', 'comuna'], as_index=False)['precio_prom'].mean().sort_values(by='precio_prom', ascending=False)
z = z.reset_index(drop=True)
z.head()

fig5=px.pie(                                                                            
    data_frame= z,
    names = 'comuna',
    values= 'precio_prom',
    color = 'estado',
    title='Precio de venta de departamentos por m2 por Comunas - Año 2019',
    hole=0.4
)
fig5.update_traces(
    textfont_size=11,
    marker={'line': {'color':'black',
                     'width':1}})
fig5

"""# **DASH**"""

app = JupyterDash(__name__, meta_tags=[{"name": "viewport", "content": "width=device-width"}],external_stylesheets=[dbc.themes.BOOTSTRAP])

app.title = 'Analisis del mercado inmobiliario en CABA - período 2013 a 2019'

app.layout = html.Div(children = [
                                 html.Div(children=[
          html.H6('Analisis del Mercado Inmobiliario en CABA', style={'background-color':'LightGray', 'color':'Black', 'text-align': 'left', 'width':'60%', 'display': 'inline-block'}),
          html.A(
          id='github-link',
          children=['Ver codigo en Github'],
          href='https://github.com/Gordin-Flona/Analisis-del-Mercado-Inmobiliario---CABA', 
          style= {'display': 'inline-block', 'width':'40%', 'background-color':'LightGray', 'text-align': 'right'}
                 ),
                ],
                className = 'app-header',
      ),
      html.P(' '),
      html.Div(
          [
           html.H2('Analisis del Mercado Inmobiliario - alquiler y compra de departamentos en CABA'),
           html.P('Realicé un EDA del Mercado Inmobiliario de CABA a partir de los datos públicos generados, guardados y publicados por el Gobierno de la Ciudad de Buenos Aires. Trabajé con los DataSets "Precio promedio Alquiler" y "Precio de Venta de Departamentos" elaborados por la Dirección General de Calidad Institucional y Gobierno Abierto.',
                    style={'font-family': 'Arial'}),
           html.A('Pagina web para acceder a los datos publicos de CABA',
                  href='https://data.buenosaires.gob.ar/dataset/mercado-inmobiliario',
                  target='blank',),
           html.P(' '),
           html.P ('Algunas consideraciones respecto de los datos utilizados:', style={'font-family': 'Arial', 'text-decoration': 'underline'}),
           html.P('Precio promedio alquiler:precio promedio mensual (expresado en pesos) de departamentos en alquiler de 2 y 3 ambientes usados y a estrenar en la Ciudad. Años abarcados : 2013 a 2019. Fuente DGEyC-GCBA en base sobre la base de datos de Argenprop.', style={'font-family': 'Arial'}),
           html.P('Precio de venta de departamentos: precio promedio del m2 (expresado en dólares) de departamentos en venta de 2 y 3 ambientes usados y a estrenar. Años abarcados : 2010 a 2019. Fuente DGEyC-GCBA en base sobre la base de datos de Argenprop.', style={'font-family': 'Arial'}),
           html.P(' '),
           html.P('En primera instancia y para tener una mayor comprension de los datos procedí con el análisis de tipos de datos, valores nulos y outliers, etc. Avancé con la identificacion de los valores nulos y verifiqué que gran parte de los datos referidos a los valores de las propiedades era inexistente. Por ello decidí eliminarlos. Esto produjo una reduccion significativa de la base de datos lo que hace que este análisis sea meramente descriptivo y no profundamente analítico.',
                  style={'font-family': 'Arial'})
           ]
              ),
      html.Div(children=[
                         dcc.Graph(id='bar1', figure=fig1),], 
                         style={'width':'90%', 'margin':'100px' '100px' '100px' '100px' ,'border': '1px' 'solid black'}),
      html.P(' '),
      html.P(' '), 
      html.Div(children=[
                         dcc.Graph(id='bar2', figure=fig2),],
                         style={'width':'90%', 'margin':'100px' '100px' '95px' '95px' ,'border': '1px' 'solid black'}),
      html.P(' '),
      html.P(' '),
      html.Div(children=[
                         dcc.Graph(id='bar3', figure=fig3),],
                         style={'width':'90%', 'margin':'100px' '100px' '95px' '95px' ,'border': '1px' 'solid black'}),
      html.P(' '),
      html.P(' '),
      html.Div(children=[
                         dcc.Graph(id='treemap', figure=fig4),],
                         style={'width':'90%', 'margin':'100px' '100px' '95px' '95px' ,'border': '1px' 'solid black'}),
      html.P(' '),
      html.P(' '),
      html.Div(children=[
                         dcc.Graph(id='line', figure=fig6),],
                         style={'width':'90%', 'margin':'100px' '100px' '95px' '95px' ,'border': '1px' 'solid black'}),
      html.P(' '),
      html.P(' '),
      html.Div(children=[
                         dcc.Graph(id='bar3', figure=fig7),],
                         style={'width':'90%', 'margin':'100px' '100px' '95px' '95px' ,'border': '1px' 'solid black'}),
      html.P(' '),
      html.P(' '),
      html.Div(children=[
                         dcc.Graph(id='pie', figure=fig5),],
                         style={'width':'90%', 'margin':'100px' '100px' '95px' '95px' ,'border': '1px' 'solid black'}),
      html.P(' ')   
      ])
               
if __name__=='__main__':  
  app.run_server(mode='external')